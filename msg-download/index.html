<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
  <meta name="format-detection" content="telephone=no">
  <meta name="x5-cache" content="disable">
  <title>圣诞新年双重礼</title>
  <link rel="stylesheet" href="./style.css">
  <script>
  //声明_czc对象:
  var _czc = _czc || [];
  //绑定siteid，请用您的siteid替换下方"XXXXXXXX"部分
  _czc.push(["_setAccount", "1268135214"]);
  </script>
</head>

<body ontouchstart="">
  <div class="wrapper">
    <div class="main-container">
      <div class="bg">
        <img src="./img/bg.png" alt="">
      </div>
      <button id="btn">立即下载</button>
      <div class="text">
        <p>普通用户分时保证金降至999元</p>
        <p>芝麻信用分大于650的用户降至699元</p>
        <p>详情请见App“我的钱包”</p>
      </div>
    </div>
  </div>
  <script>
  (function() {
    window._czc.push(["_trackEvent", "短信推广", "老带新", "打开页面"])
    document.querySelector('#btn').addEventListener('click', function() {
      window._czc.push(["_trackEvent", "短信推广", "老带新", "下载App"])
      setTimeout(function(){
        window.open('http://a.app.qq.com/o/simple.jsp?pkgname=com.usercar.yongche')
      }, 200)
    }, false)
  })()
  </script>
  <script src="http://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>
  <script>
    // 设置微信分享信息
  function wxjssdk() {
    window.wxShareData = {
      // 分享标题，根据情况修改
      title: '【一步用车】圣诞新年双重礼，邀请好友得1260元券',
      // 分享描述，根据情况修改
      desc: '老铁一起浪起来，天冷限行都不怕，快来免费用车吧。',
      // 分享链接，必须与当前页面对应的公众号JS安全域名一致
      link: location.href,
      // 分享缩略图参考尺寸300*300，根据情况修改
      imgUrl: 'http://h5.1byongche.com/static/img/logo.png'
    };


    function configWeixin() {
      var xmlhttp
      if (window.XMLHttpRequest) {
        xmlhttp = new XMLHttpRequest()
      } else {
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP")
      }
      xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == 4) {
          if (xmlhttp.status == 200) {
            var data = JSON.parse(xmlhttp.responseText);
            wx.config({
              // 可以开启debug模式，页面会alert出错误信息
              debug: false,
              appId: data.appId,
              timestamp: data.timestamp,
              nonceStr: data.noncestr,
              signature: data.signature,
              // 配置所需的API列表
              jsApiList: ['checkJsApi',
                'onMenuShareTimeline',
                'onMenuShareAppMessage'
              ]
            });
          } else {
            callback(null)
          }
        }
      }
      // xmlhttp.open("POST", "http://101.132.26.45:8085/invite/regist-coupons.html", true)
      xmlhttp.open("GET", "http://106.14.92.204:3000/weixin/sign?url=" + encodeURIComponent(location.href.split('#')[0]), true)
      xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded; charset=utf-8")
      xmlhttp.send()
    }

    configWeixin()

    wx.ready(function() {
      // 分享到朋友圈
      wx.onMenuShareTimeline({
        title: wxShareData.title,
        desc: wxShareData.desc,
        link: wxShareData.link,
        imgUrl: wxShareData.imgUrl,
        trigger: function(res) {
          // 不要尝试在trigger中使用ajax异步请求修改本次分享的内容，因为客户端分享操作是一个同步操作，这时候使用ajax的回包会还没有返回
        },
        success: function() {
          // 用户确认分享后执行的回调函数
        },
        cancel: function() {
          // 用户取消分享后执行的回调函数
        }
      });
      // 分享给朋友
      wx.onMenuShareAppMessage({
        title: wxShareData.title,
        desc: wxShareData.desc,
        link: wxShareData.link,
        imgUrl: wxShareData.imgUrl,
        success: function() {
          // 用户确认分享后执行的回调函数
        },
        cancel: function() {
          // 用户取消分享后执行的回调函数
        }
      });
    });
  }

  wxjssdk();
  </script>
  <script src="https://s13.cnzz.com/z_stat.php?id=1268135214&web_id=1268135214" language="JavaScript"></script>
</body>

</html>